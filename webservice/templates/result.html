<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Graph</title>
	<link rel="stylesheet" href="static/css/cssreset.css">
	<link rel="stylesheet" href="static/css/graph.css">
	<!--<link rel="stylesheet" href="styles/styles.css">
	<link rel="stylesheet/less" type="text/css" href="less/styles.less">
	<script src="js/less.js" type="text/javascript"></script>-->

</head>
<body>
	<!-- График HTML -->
	<div id="graph-wrapper">
	    <div class="graph-info">
	        <a href="javascript:void(0)" class="visitors">Visitors</a>
	        <a href="javascript:void(0)" class="returning">Returning Visitors</a>
	 
	        <a href="#" id="bars"><span></span></a>
	        <a href="#" id="lines" class="active"><span></span></a>
	    </div>
	 
	    <div class="graph-container">
	        <div id="graph-lines"></div>
	        <div id="graph-bars"></div>
	    </div>
	</div>
	<!-- Конец графика HTML -->
	<script src="static/js/jquery.min.js" type="text/javascript"></script>
	<script src="static/js/jquery.flot.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
		// Graph Data ##############################################
		var graphData = [{
		// i am
		data: [ [0, 1], [1, 1], [2, 1], [3, 1], [4, 0], [5, 1], [6, 1], [7, 0], [8, 1], [9, 1], [10, 1] ],
		color: '#71c73e'
		}, {
		// my baby
		data: [ [0, 0], [1, 0], [2, 1], [3, 0], [4, 1], [5, 1], [6, 0], [7, 0], [8, 1], [9, 1], [10, 1] ],
		color: '#77b7c5',
		points: { radius: 4, fillColor: '#77b7c5' }
		}
		];
		// Lines Graph #############################################
		$.plot($('#graph-lines'), graphData, {
		series: {
		points: {
		show: true,
		radius: 5
		},
		lines: {
		show: true
		},
		shadowSize: 0
		},
		grid: {
		color: '#646464',
		borderColor: 'transparent',
		borderWidth: 20,
		hoverable: true
		},
		xaxis: {
		tickColor: 'transparent',
		tickDecimals: 0
		},
		yaxis: {
		tickSize: 1
		}
		});
		// Bars Graph ##############################################
		$.plot($('#graph-bars'), graphData, {
		series: {
		bars: {
		show: true,
		barWidth: .9,
		align: 'center'
		},
		shadowSize: 0
		},
		grid: {
		color: '#646464',
		borderColor: 'transparent',
		borderWidth: 20,
		hoverable: true
		},
		xaxis: {
		tickColor: 'transparent',
		tickDecimals: 0
		},
		yaxis: {
		tickSize: 1
		}
		});
		// Graph Toggle ############################################
		$('#graph-bars').hide();
		$('#lines').on('click', function (e) {
		$('#bars').removeClass('active');
		$('#graph-bars').fadeOut();
		$(this).addClass('active');
		$('#graph-lines').fadeIn();
		e.preventDefault();
		});
		$('#bars').on('click', function (e) {
		$('#lines').removeClass('active');
		$('#graph-lines').fadeOut();
		$(this).addClass('active');
		$('#graph-bars').fadeIn().removeClass('hidden');
		e.preventDefault();
		});
		// Tooltip #################################################
		function showTooltip(x, y, contents) {
		$('<div id="tooltip">' + contents + '</div>').css({
		top: y - 16,
		left: x + 20
		}).appendTo('body').fadeIn();
		}
		var previousPoint = null;
		$('#graph-lines, #graph-bars').bind('plothover', function (event, pos, item) {
		if (item) {
		if (previousPoint != item.dataIndex) {
		previousPoint = item.dataIndex;
		$('#tooltip').remove();
		var x = item.datapoint[0],
		y = item.datapoint[1];
		showTooltip(item.pageX, item.pageY, y + ' visitors at ' + x + '.00h');
		}
		} else {
		$('#tooltip').remove();
		previousPoint = null;
		}
		});
		}); 
	</script>
</body>
</html>
